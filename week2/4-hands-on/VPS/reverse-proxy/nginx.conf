events {}

http {
    resolver 127.0.0.11 ipv6=off;

    server {
        listen 80;

        # -----------------------------
        # DEFAULT LANDING PAGE
        # -----------------------------
        location = / {
            root /usr/share/nginx/html;
            index index.html;
        }

        # ======================================================
        # APP 1
        # ======================================================
        set $frontend1 http://frontend1:3001;
        set $backend1  http://backend1:7001;

        location /app1/ {
            proxy_pass $frontend1;
        }

        location /app1/api/ {
            proxy_pass $backend1;
        }

        # ======================================================
        # APP 2
        # ======================================================
        set $frontend2 http://frontend2:3002;
        set $backend2  http://backend2:7002;

        location /app2/ {
            proxy_pass $frontend2;
        }

        location /app2/api/ {
            proxy_pass $backend2;
        }

        # ======================================================
        # APP 3
        # ======================================================
        set $frontend3 http://frontend3:3003;
        set $backend3  http://backend3:7003;

        location /app3/ {
            proxy_pass $frontend3;
        }

        location /app3/api/ {
            proxy_pass $backend3;
        }

        # ======================================================
        # APP 4
        # ======================================================
        set $frontend4 http://frontend4:3004;
        set $backend4  http://backend4:7004;

        location /app4/ {
            proxy_pass $frontend4;
        }

        location /app4/api/ {
            proxy_pass $backend4;
        }

        # ======================================================
        # APP 5
        # ======================================================
        set $frontend5 http://frontend5:3005;
        set $backend5  http://backend5:7005;

        location /app5/ {
            proxy_pass $frontend5;
        }

        location /app5/api/ {
            proxy_pass $backend5;
        }

        # ======================================================
        # APP 6
        # ======================================================
        set $frontend6 http://frontend6:3006;
        set $backend6  http://backend6:7006;

        location /app6/ {
            proxy_pass $frontend6;
        }

        location /app6/api/ {
            proxy_pass $backend6;
        }

        # ======================================================
        # APP 7
        # ======================================================
        set $frontend7 http://frontend7:3007;
        set $backend7  http://backend7:7007;

        location /app7/ {
            proxy_pass $frontend7;
        }

        location /app7/api/ {
            proxy_pass $backend7;
        }

        # ======================================================
        # APP 8
        # ======================================================
        set $frontend8 http://frontend8:3008;
        set $backend8  http://backend8:7008;

        location /app8/ {
            proxy_pass $frontend8;
        }

        location /app8/api/ {
            proxy_pass $backend8;
        }

        # ======================================================
        # APP 9
        # ======================================================
        set $frontend9 http://frontend9:3009;
        set $backend9  http://backend9:7009;

        location /app9/ {
            proxy_pass $frontend9;
        }

        location /app9/api/ {
            proxy_pass $backend9;
        }

        # ======================================================
        # APP 10
        # ======================================================
        set $frontend10 http://frontend10:3010;
        set $backend10  http://backend10:7010;

        location /app10/ {
            proxy_pass $frontend10;
        }

        location /app10/api/ {
            proxy_pass $backend10;
        }

        # ======================================================
        # ERROR PAGE
        # ======================================================
        error_page 502 503 504 404 /unavailable.html;

        location = /unavailable.html {
            root /usr/share/nginx/html;
        }
    }
}
